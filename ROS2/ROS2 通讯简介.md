### **ROS2 通讯简介**

#### 节点

所有通讯对象都依赖节点，ROS2中单个可执行程序可以包含多个节点

#### 话题

话题是一个纽带，具有同种话题的节点可以关联在一起

#### 通信模型

 话题通讯 ，发布方发送，订阅方接受，单向流动（**单向模型**）

 服务通讯，客户端发送请求，服务端响应（**交互模型**）

 动作通讯，客户端发送请求，服务端持续反应，到最终响应

参数通讯客户端发送请求连接服务端操作服务端的数据（**共享模型**）

#### 接口

 		数据的载体，常用接口文件有 **msg 文件，srv文件，action文件**

分别用于话题通讯，服务通讯，动作通讯

#####  1.msg文件

msg文件是用于定义话题通信中数据载体的接口文件，一个典型的`.msg`文件示例如下。

```
int64 num1
int64 num2
```

在文件中声明了一些被传输的类似于C++变量的数据。

##### 2.srv文件

srv文件是用于定义服务通信中数据载体的接口文件，一个典型的`.srv`文件示例如下。

```
int64 num1
int64 num2
---
int64 sum
```

文件中声明的数据被`---`分割为两部分，上半部分用于声明请求数据，下半部分用于声明响应数据。

##### 3.action文件

action文件使用用于定义动作通信中数据载体的接口文件，一个典型的`.action`文件示例如下。

```
int64 num
---
int64 sum
---
float64 progress
```

文件中声明的数据被`---`分割为三部分，上半部分用于声明请求数据，中间部分用于声明响应数据，下半部分用于声明连续反馈数据。

##### 4.变量类型

不管是何种接口文件，在文件中每行声明的数据都由字段类型和字段名称组成，可以使用的字段类型有：

- int8, int16, int32, int64 (或者无符号类型: uint*)
- float32, float64
- string
- time, duration
- 其他msg文件
- 变长数组和定长数组

ROS中还有一种特殊类型：`Header`，标头包含时间戳和ROS2中常用的坐标帧信息。许多接口文件的第一行包含`Header`标头。

另外，需要说明的是：

> 参数通信的数据无需定义接口文件，参数通信时数据会被封装为参数对象，参数客户端和服务端操作的都是参数对象。